(function (factory) {
    if (typeof module === 'object' && typeof module.exports === 'object') {
        var v = factory(require, exports); if (v !== undefined) module.exports = v;
    }
    else if (typeof define === 'function' && define.amd) {
        define(["require", "exports", 'dojo-core/Map', 'dojo-core/Symbol', 'dojo-core/WeakMap'], factory);
    }
})(function (require, exports) {
    "use strict";
    var Map_1 = require('dojo-core/Map');
    var Symbol_1 = require('dojo-core/Symbol');
    var WeakMap_1 = require('dojo-core/WeakMap');
    var actionMap = new Map_1.default();
    var typeMap = new WeakMap_1.default();
    function byType(type) {
        return actionMap.get(type);
    }
    exports.byType = byType;
    function getType(action) {
        return typeMap.get(action);
    }
    exports.getType = getType;
    function add(action, type) {
        var oldtype = typeMap.get(action);
        if (oldtype && oldtype !== type) {
            actionMap.delete(typeMap.get(action));
            typeMap.delete(action);
        }
        else if (type && actionMap.has(type) && actionMap.get(type) !== action) {
            throw new TypeError("Cannot add duplicate action type: " + type);
        }
        if (!type) {
            type = Symbol_1.default();
        }
        if (oldtype !== type) {
            actionMap.set(type, action);
            typeMap.set(action, type);
        }
        return {
            destroy: function () {
                if (typeMap.has(action)) {
                    actionMap.delete(typeMap.get(action));
                    typeMap.delete(action);
                }
            }
        };
    }
    exports.add = add;
});
//# sourceMappingURL=_debug/actions.js.map